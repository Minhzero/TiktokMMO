---
import Layout from '../../layouts/Layout.astro';
import Card from '../../components/Card.astro';

// Extract the language from the URL
const params = Astro.url.pathname.split('/');
const language = params[1] || 'en';
// Dynamically import the content based on the language
let translations;
try {
    translations = await import(`../../language/${language}.json`);
} catch (error) {
    console.error(`Failed to load language content for ${language}`, error);
    // Fallback to default language if the specified language file does not exist
    translations = await import('../../language/en.json');
}
---

<Layout title={translations.title}>
    <!-- Header with language selection -->
    <header class="bg-dark text-white">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center py-2">
                <!-- Brand Name -->
                <a class="navbar-brand text-white" href="/en">{translations.hero.heading}</a>
                <!-- Language Dropdown -->
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        Language
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                        <li><a class="dropdown-item" href="/ar">ğŸ‡¦ğŸ‡ª Arabic (Tiáº¿ng áº¢ Ráº­p)</a></li>
                        <li><a class="dropdown-item" href="/bn">ğŸ‡§ğŸ‡© Bengali (Tiáº¿ng Bengal)</a></li>
                        <li><a class="dropdown-item" href="/de">ğŸ‡©ğŸ‡ª German (Tiáº¿ng Äá»©c)</a></li>
                        <li><a class="dropdown-item" href="/en">ğŸ‡¬ğŸ‡§ English (Tiáº¿ng Anh)</a></li>
                        <li><a class="dropdown-item" href="/es">ğŸ‡ªğŸ‡¸ Spanish (Tiáº¿ng TÃ¢y Ban Nha)</a></li>
                        <li><a class="dropdown-item" href="/fr">ğŸ‡«ğŸ‡· French (Tiáº¿ng PhÃ¡p)</a></li>
                        <li><a class="dropdown-item" href="/gu">ğŸ‡®ğŸ‡³ Gujarati (Tiáº¿ng Gujarat)</a></li>
                        <li><a class="dropdown-item" href="/he">ğŸ‡®ğŸ‡± Hebrew (Tiáº¿ng Do ThÃ¡i)</a></li>
                        <li><a class="dropdown-item" href="/hi">ğŸ‡®ğŸ‡³ Hindi (Tiáº¿ng Hindi)</a></li>
                        <li><a class="dropdown-item" href="/id">ğŸ‡®ğŸ‡© Indonesian (Tiáº¿ng Indonesia)</a></li>
                        <li><a class="dropdown-item" href="/it">ğŸ‡®ğŸ‡¹ Italian (Tiáº¿ng Ã)</a></li>
                        <li><a class="dropdown-item" href="/ja">ğŸ‡¯ğŸ‡µ Japanese (Tiáº¿ng Nháº­t)</a></li>
                        <li><a class="dropdown-item" href="/jv">ğŸ‡®ğŸ‡© Javanese (Tiáº¿ng Java)</a></li>
                        <li><a class="dropdown-item" href="/ko">ğŸ‡°ğŸ‡· Korean (Tiáº¿ng HÃ n Quá»‘c)</a></li>
                        <li><a class="dropdown-item" href="/ms">ğŸ‡²ğŸ‡¾ Malay (Tiáº¿ng MÃ£ Lai)</a></li>
                        <li><a class="dropdown-item" href="/nl">ğŸ‡³ğŸ‡± Dutch (Tiáº¿ng HÃ  Lan)</a></li>
                        <li><a class="dropdown-item" href="/pa">ğŸ‡®ğŸ‡³ Punjabi (Tiáº¿ng Punjab)</a></li>
                        <li><a class="dropdown-item" href="/pl">ğŸ‡µğŸ‡± Polish (Tiáº¿ng Ba Lan)</a></li>
                        <li><a class="dropdown-item" href="/ru">ğŸ‡·ğŸ‡º Russian (Tiáº¿ng Nga)</a></li>
                        <li><a class="dropdown-item" href="/pt">ğŸ‡µğŸ‡¹ Portuguese (Tiáº¿ng Bá»“ ÄÃ o Nha)</a></li>
                        <li><a class="dropdown-item" href="/sv">ğŸ‡¸ğŸ‡ª Swedish (Tiáº¿ng Thá»¥y Äiá»ƒn)</a></li>
                        <li><a class="dropdown-item" href="/ta">ğŸ‡®ğŸ‡³ Tamil (Tiáº¿ng Tamil)</a></li>
                        <li><a class="dropdown-item" href="/th">ğŸ‡¹ğŸ‡­ Thai (Tiáº¿ng ThÃ¡i)</a></li>
                        <li><a class="dropdown-item" href="/tr">ğŸ‡¹ğŸ‡· Turkish (Tiáº¿ng Thá»• NhÄ© Ká»³)</a></li>
                        <li><a class="dropdown-item" href="/ur">ğŸ‡µğŸ‡° Urdu (Tiáº¿ng Urdu)</a></li>
                        <li><a class="dropdown-item" href="/vi">ğŸ‡»ğŸ‡³ Vietnamese (Tiáº¿ng Viá»‡t)</a></li>
                        <li><a class="dropdown-item" href="/zh">ğŸ‡¨ğŸ‡³ Mandarin Chinese (Tiáº¿ng Trung Quá»‘c)</a></li>
                    </ul>

                </div>
            </div>
        </div>
    </header>


    <main class="container my-5 ">

        <section id="hero" class="containerTitle title bg-primary text-white p-4 rounded shadow-sm mb-4">
            <div class="container w-100">
                <h1 class="title-1 text-center">
                    {translations.hero.heading}
                </h1>
                <p class="lead text-center font-weight-bold mb-4">
                    {translations.hero.subheading}
                </p>
                <!-- Input Form -->
                <form action="download" class="form" name="formurl" method="POST" enctype="application/x-www-form-urlencoded">
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" name="tiktokLink" id="tiktokLink" placeholder={translations.hero.form.placeholder} required aria-label="TikTok video link" aria-describedby="button-download">
                        <button class="btn btn-secondary" type="button" id="button-paste">{translations.hero.form.button_paste}</button>
                        <button class="btn btn-success" type="submit" id="button-download">{translations.hero.form.button_download}</button>
                    </div>
                </form>
            </div>
        </section>

        <section class="intro bg-primary text-white p-4 rounded shadow-sm mb-4">
            <h2>{translations.about.heading}</h2>
            <p>{translations.about.paragraph_1}</p>
            <p>{translations.about.paragraph_2}</p>
        </section>

        <section class="features bg-primary text-white p-4 rounded shadow-sm mb-4">
            <h2>{translations.features.heading}</h2>
            <ul class="list-unstyled">
                <li><strong>{translations.features.feature_1}</strong></li>
                <li><strong>{translations.features.feature_2}</strong></li>
                <li><strong>{translations.features.feature_3}</strong></li>
                <li><strong>{translations.features.feature_4}</strong></li>
                <li><strong>{translations.features.feature_5}</strong></li>
            </ul>
        </section>

        <section class="instructions bg-primary text-white p-4 rounded shadow-sm mb-4">
            <h2>{translations.instructions.heading}</h2>
            <ol>
                <li>{translations.instructions.step_1}</li>
                <li>{translations.instructions.step_2}</li>
                <li>{translations.instructions.step_3}</li>
                <li>{translations.instructions.step_4}</li>
                <li>{translations.instructions.step_5}</li>
            </ol>
        </section>

    </main>

    <footer class="bg-dark text-white text-center py-4">
        <div class="container">
            <p class="mb-0">{translations.footer.copyright}</p>
            <p class="mb-0">
                <a href="/privacy-policy" class="text-white">{translations.footer.privacy_policy}</a> |
                <a href="/terms-of-service" class="text-white">{translations.footer.terms_of_service}</a>
            </p>
        </div>
    </footer>
</Layout>
