---
import Layout from '../../layouts/Layout.astro';
import Card from '../../components/Card.astro';

// Extract the language from the URL
const params = Astro.url.pathname.split('/');
const language = params[1] || 'en';
// Dynamically import the content based on the language
let translations;
try {
    translations = await import(`../../language/${language}.json`);
} catch (error) {
    console.error(`Failed to load language content for ${language}`, error);
    // Fallback to default language if the specified language file does not exist
    translations = await import('../../language/en.json');
}
---

<Layout title={translations.title}>
    <!-- Header with language selection -->
    <header class="bg-dark text-white">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center py-2">
                <!-- Brand Name -->
                <a class="navbar-brand text-white" href="/en">{translations.hero.heading}</a>
                <!-- Language Dropdown -->
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        Language
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                        <li><a class="dropdown-item" href="/ar">🇦🇪 Arabic (Tiếng Ả Rập)</a></li>
                        <li><a class="dropdown-item" href="/bn">🇧🇩 Bengali (Tiếng Bengal)</a></li>
                        <li><a class="dropdown-item" href="/de">🇩🇪 German (Tiếng Đức)</a></li>
                        <li><a class="dropdown-item" href="/en">🇬🇧 English (Tiếng Anh)</a></li>
                        <li><a class="dropdown-item" href="/es">🇪🇸 Spanish (Tiếng Tây Ban Nha)</a></li>
                        <li><a class="dropdown-item" href="/fr">🇫🇷 French (Tiếng Pháp)</a></li>
                        <li><a class="dropdown-item" href="/gu">🇮🇳 Gujarati (Tiếng Gujarat)</a></li>
                        <li><a class="dropdown-item" href="/he">🇮🇱 Hebrew (Tiếng Do Thái)</a></li>
                        <li><a class="dropdown-item" href="/hi">🇮🇳 Hindi (Tiếng Hindi)</a></li>
                        <li><a class="dropdown-item" href="/id">🇮🇩 Indonesian (Tiếng Indonesia)</a></li>
                        <li><a class="dropdown-item" href="/it">🇮🇹 Italian (Tiếng Ý)</a></li>
                        <li><a class="dropdown-item" href="/ja">🇯🇵 Japanese (Tiếng Nhật)</a></li>
                        <li><a class="dropdown-item" href="/jv">🇮🇩 Javanese (Tiếng Java)</a></li>
                        <li><a class="dropdown-item" href="/ko">🇰🇷 Korean (Tiếng Hàn Quốc)</a></li>
                        <li><a class="dropdown-item" href="/ms">🇲🇾 Malay (Tiếng Mã Lai)</a></li>
                        <li><a class="dropdown-item" href="/nl">🇳🇱 Dutch (Tiếng Hà Lan)</a></li>
                        <li><a class="dropdown-item" href="/pa">🇮🇳 Punjabi (Tiếng Punjab)</a></li>
                        <li><a class="dropdown-item" href="/pl">🇵🇱 Polish (Tiếng Ba Lan)</a></li>
                        <li><a class="dropdown-item" href="/ru">🇷🇺 Russian (Tiếng Nga)</a></li>
                        <li><a class="dropdown-item" href="/pt">🇵🇹 Portuguese (Tiếng Bồ Đào Nha)</a></li>
                        <li><a class="dropdown-item" href="/sv">🇸🇪 Swedish (Tiếng Thụy Điển)</a></li>
                        <li><a class="dropdown-item" href="/ta">🇮🇳 Tamil (Tiếng Tamil)</a></li>
                        <li><a class="dropdown-item" href="/th">🇹🇭 Thai (Tiếng Thái)</a></li>
                        <li><a class="dropdown-item" href="/tr">🇹🇷 Turkish (Tiếng Thổ Nhĩ Kỳ)</a></li>
                        <li><a class="dropdown-item" href="/ur">🇵🇰 Urdu (Tiếng Urdu)</a></li>
                        <li><a class="dropdown-item" href="/vi">🇻🇳 Vietnamese (Tiếng Việt)</a></li>
                        <li><a class="dropdown-item" href="/zh">🇨🇳 Mandarin Chinese (Tiếng Trung Quốc)</a></li>
                    </ul>

                </div>
            </div>
        </div>
    </header>


    <main class="container my-5 ">

        <section id="hero" class="containerTitle title bg-primary text-white p-4 rounded shadow-sm mb-4">
            <div class="container w-100">
                <h1 class="title-1 text-center">
                    {translations.hero.heading}
                </h1>
                <p class="lead text-center font-weight-bold mb-4">
                    {translations.hero.subheading}
                </p>
                <!-- Input Form -->
                <form action="download" class="form" name="formurl" method="POST" enctype="application/x-www-form-urlencoded">
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" name="tiktokLink" id="tiktokLink" placeholder={translations.hero.form.placeholder} required aria-label="TikTok video link" aria-describedby="button-download">
                        <button class="btn btn-secondary" type="button" id="button-paste">{translations.hero.form.button_paste}</button>
                        <button class="btn btn-success" type="submit" id="button-download">{translations.hero.form.button_download}</button>
                    </div>
                </form>
            </div>
        </section>

        <section class="intro bg-primary text-white p-4 rounded shadow-sm mb-4">
            <h2>{translations.about.heading}</h2>
            <p>{translations.about.paragraph_1}</p>
            <p>{translations.about.paragraph_2}</p>
        </section>

        <section class="features bg-primary text-white p-4 rounded shadow-sm mb-4">
            <h2>{translations.features.heading}</h2>
            <ul class="list-unstyled">
                <li><strong>{translations.features.feature_1}</strong></li>
                <li><strong>{translations.features.feature_2}</strong></li>
                <li><strong>{translations.features.feature_3}</strong></li>
                <li><strong>{translations.features.feature_4}</strong></li>
                <li><strong>{translations.features.feature_5}</strong></li>
            </ul>
        </section>

        <section class="instructions bg-primary text-white p-4 rounded shadow-sm mb-4">
            <h2>{translations.instructions.heading}</h2>
            <ol>
                <li>{translations.instructions.step_1}</li>
                <li>{translations.instructions.step_2}</li>
                <li>{translations.instructions.step_3}</li>
                <li>{translations.instructions.step_4}</li>
                <li>{translations.instructions.step_5}</li>
            </ol>
        </section>

    </main>

    <footer class="bg-dark text-white text-center py-4">
        <div class="container">
            <p class="mb-0">{translations.footer.copyright}</p>
            <p class="mb-0">
                <a href="/privacy-policy" class="text-white">{translations.footer.privacy_policy}</a> |
                <a href="/terms-of-service" class="text-white">{translations.footer.terms_of_service}</a>
            </p>
        </div>
    </footer>
</Layout>
